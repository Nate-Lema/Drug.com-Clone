import{b as j}from"./chunk-7MFPINIG.js";import{a as z}from"./chunk-ZA6DTMJJ.js";import{c as B,f as L,g as V}from"./chunk-SP3ND3RW.js";import"./chunk-FZDFYFOH.js";import{Eb as s,Fb as E,Gb as _,Ib as P,Lb as O,Mb as k,Nb as I,Oa as p,Za as M,aa as m,ca as C,cb as h,d as u,e as x,eb as y,f,ib as b,ic as T,jc as F,ka as R,la as S,mb as a,nb as r,qa as g,rb as D,ub as $,vb as v}from"./chunk-YNHFQ7LH.js";var A=(o,l)=>["/medications",o,"reviews",l];function q(o,l){if(o&1&&(a(0,"p")(1,"strong"),s(2),r(),s(3),r(),a(4,"p"),s(5),r(),a(6,"p"),s(7),k(8,"date"),r()),o&2){let e,t,d,i,n=v();p(2),E((e=n.review$())==null||e.by==null?null:e.by.fullname),p(),_(": ",(t=n.review$())==null?null:t.review,""),p(2),_("Rating: ",(d=(d=n.review$())==null?null:d.rating)!==null&&d!==void 0?d:0,"/5"),p(2),_("Date: ",I(8,4,(i=n.review$())==null?null:i.date),"")}}function G(o,l){if(o&1){let e=D();a(0,"button",3),s(1,"Edit"),r(),a(2,"button",4),$("click",function(){let d;R(e);let i=v();return S(i.deleteReview(i.medication_id(),(d=i.review$())==null?null:d._id))}),s(3,"Delete"),r()}if(o&2){let e,t=v();y("routerLink",O(1,A,t.medication_id(),(e=t.review$())==null?null:e._id))}}var ee=(()=>{var l,e;let t=class t{constructor(){x(this,l);x(this,e);this.title=m(B),f(this,l,m(z)),this.authService=m(j),f(this,e,m(L)),this.medication_id=g(""),this.review_id=g(""),this.review$=M(null)}ngOnInit(){this.medication_id()&&this.review_id()&&this.getReview(this.medication_id(),this.review_id()),this.title.setTitle("Review Detail")}getReview(i,n){u(this,l).getMedicationReviewById(i,n).subscribe(c=>{c.success&&c.data?this.review$.set(c.data):alert("Failed to fetch Review")})}deleteReview(i,n){u(this,l).deleteMedicationReviewById(i,n).subscribe({next:()=>u(this,e).navigate(["detail",i]),error:()=>alert("Failed to delete Review")})}};l=new WeakMap,e=new WeakMap,t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=C({type:t,selectors:[["app-detail-review"]],inputs:{medication_id:[1,"medication_id"],review_id:[1,"review_id"]},standalone:!0,features:[P],decls:7,vars:2,consts:[[1,"detail-container"],[1,"reviews"],[1,"actions"],[3,"routerLink"],[3,"click"]],template:function(n,c){if(n&1&&(a(0,"div",0)(1,"h1"),s(2,"Review Detail"),r(),a(3,"div",1),h(4,q,9,6),r(),a(5,"div",2),h(6,G,4,4),r()()),n&2){let w;p(4),b(c.review$()!==null?4:-1),p(2),b(c.authService.is_logged_in()&&((w=c.review$())==null||w.by==null?null:w.by.user_id)===c.authService.$state()._id?6:-1)}},dependencies:[F,T,V],styles:[".detail-container[_ngcontent-%COMP%]{padding:20px;border:1px solid #ddd;border-radius:4px;box-shadow:0 0 10px #0000001a;max-width:600px;margin:0 auto}h1[_ngcontent-%COMP%]{text-align:center;color:#00796b}.reviews[_ngcontent-%COMP%]{margin-top:20px}.reviews[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#555}.actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-around}button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#00796b;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px}button[_ngcontent-%COMP%]:hover{background-color:#005a4f}"]});let o=t;return o})();export{ee as DetailReviewComponent};
