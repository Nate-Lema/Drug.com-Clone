import{a as N}from"./chunk-ZA6DTMJJ.js";import{a as R,b as s,c as V,d as D,e as I,f as k,g as O,h as T,i as U,j as B,k as G,m as P,o as j,p as E,r as q,s as A,t as z}from"./chunk-4GGTLMQY.js";import{a as F}from"./chunk-SFIQW75N.js";import"./chunk-WXI33M2S.js";import{c as x,f as C}from"./chunk-SP3ND3RW.js";import"./chunk-FZDFYFOH.js";import{Eb as M,Ib as y,Oa as w,aa as n,ca as g,d as i,e as l,eb as b,f as p,jc as S,mb as d,nb as c,ob as h,qa as v,ub as _}from"./chunk-YNHFQ7LH.js";var ne=(()=>{var r,e,m;let o=class o{constructor(){l(this,r);l(this,e);l(this,m);this.title=n(x),p(this,r,n(N)),p(this,e,n(F)),p(this,m,n(C)),this.form=n(G).nonNullable.group({review:["",s.required],rating:["",[s.required,s.min(1),s.max(5)]]}),this.medication_id=v(""),this.review_id=v("")}ngOnInit(){this.medication_id()&&this.review_id()&&i(this,r).getMedicationReviewById(this.medication_id(),this.review_id()).subscribe({next:t=>{t.success&&t.data?this.form.patchValue({review:t.data.review,rating:t.data.rating.toString()}):i(this,e).error("Failed to fetch review details")},error:()=>{i(this,e).error("Failed to fetch review details")}}),this.title.setTitle("Update Review")}onSubmit(){if(this.form.valid){let t=this.form.value,a={_id:this.review_id(),review:t.review,rating:Number(t.rating),by:{user_id:"",fullname:""},date:Date.now()};i(this,r).updateMedicationReview(this.medication_id(),a).subscribe({next:u=>{u.success?(i(this,e).success("Review updated successfully"),i(this,m).navigate(["/medications","detail",this.medication_id()])):i(this,e).error("Failed to update review, try again.")},error:()=>{i(this,e).error("Failed to update review, try again.")}})}}};r=new WeakMap,e=new WeakMap,m=new WeakMap,o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=g({type:o,selectors:[["app-update-review"]],inputs:{medication_id:[1,"medication_id"],review_id:[1,"review_id"]},standalone:!0,features:[y],decls:8,vars:1,consts:[[1,"wrapper"],[3,"ngSubmit","formGroup"],[1,"input-field"],["matInput","","placeholder","Update your review","formControlName","review"],["matInput","","type","number","min","1","max","5","placeholder","Update your rating (1-5)","formControlName","rating"],["mat-flat-button","","type","submit",1,"button"]],template:function(a,u){a&1&&(d(0,"div",0)(1,"form",1),_("ngSubmit",function(){return u.onSubmit()}),d(2,"mat-form-field",2),h(3,"textarea",3),c(),d(4,"mat-form-field",2),h(5,"input",4),c(),d(6,"button",5),M(7,"Update Review"),c()()()),a&2&&(w(),b("formGroup",u.form))},dependencies:[S,P,I,R,k,V,D,B,U,O,T,E,j,z,A,q],styles:[".wrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background:url(/images/form.jpg);background-size:cover;background-repeat:no-repeat;background-position:bottom;padding-top:28px}form[_ngcontent-%COMP%]{height:80%;gap:16px;display:flex;flex-direction:column;align-items:center;justify-content:center}.input-field[_ngcontent-%COMP%]{width:450px}button[_ngcontent-%COMP%]{width:450px;border-radius:8px;background-color:#005a4f!important}"]});let f=o;return f})();export{ne as UpdateReviewComponent};
