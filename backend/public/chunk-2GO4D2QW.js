import{a as F}from"./chunk-ZA6DTMJJ.js";import{a as N,b as v,c as q,d as w,e as O,g as P,h as V,k,m as D,o as I,p as G,q as B,r as j,s as H,t as R}from"./chunk-4GGTLMQY.js";import{a as T}from"./chunk-SFIQW75N.js";import"./chunk-WXI33M2S.js";import{c as E,f as A}from"./chunk-SP3ND3RW.js";import"./chunk-FZDFYFOH.js";import{Eb as r,Ib as S,Oa as c,aa as f,ca as y,cb as s,d as u,e as C,eb as b,f as x,ib as m,mb as t,nb as l,ob as g,ub as M,vb as h}from"./chunk-YNHFQ7LH.js";function K(e,n){e&1&&(t(0,"mat-error"),r(1,"Name is "),t(2,"strong"),r(3,"required"),l()())}function L(e,n){e&1&&(t(0,"mat-error"),r(1,"Medication name already "),t(2,"strong"),r(3,"exist"),l()())}function Q(e,n){if(e&1&&s(0,K,4,0,"mat-error")(1,L,4,0,"mat-error"),e&2){let a=h();m(a.name.hasError("required")?0:-1),c(),m(a.name.hasError("name_exist")?1:-1)}}function U(e,n){e&1&&(t(0,"mat-error"),r(1,"Generic name is "),t(2,"strong"),r(3,"required"),l()())}function W(e,n){if(e&1&&s(0,U,4,0,"mat-error"),e&2){let a=h();m(a.generic_name.hasError("required")?0:-1)}}function X(e,n){e&1&&(t(0,"mat-error"),r(1,"Availability is "),t(2,"strong"),r(3,"required"),l()())}function Y(e,n){e&1&&(t(0,"mat-error"),r(1,"Please enter "),t(2,"strong"),r(3,"Prescription or OTC"),l()())}function Z(e,n){if(e&1&&s(0,X,4,0,"mat-error")(1,Y,4,0,"mat-error"),e&2){let a=h();m(a.availability.hasError("required")?0:-1),c(),m(a.availability.hasError("invalidAvailability")?1:-1)}}function $(e,n){e&1&&(t(0,"mat-error"),r(1,"Medication class is "),t(2,"strong"),r(3,"required"),l()())}function ee(e,n){if(e&1&&s(0,$,4,0,"mat-error"),e&2){let a=h();m(a.medication_class.hasError("required")?0:-1)}}var _e=(()=>{var n,a,_;let p=class p{constructor(){C(this,n);C(this,a);C(this,_);this.title=f(E),x(this,n,f(F)),x(this,a,f(T)),x(this,_,f(A)),this.form=f(k).nonNullable.group({name:["",{validators:[v.required],asyncValidators:this.checkMedicationNameExist.bind(this),updateOn:"blur"}],generic_name:["",v.required],availability:["",[v.required,this.availabilityValidator()]],medication_class:["",v.required]}),this.title.setTitle("Add Medication")}get name(){return this.form.controls.name}get generic_name(){return this.form.controls.generic_name}get availability(){return this.form.controls.availability}get medication_class(){return this.form.controls.medication_class}addMedicationHandler(){let d=this.form.value,o=new FormData;o.append("name",d.name),o.append("generic_name",d.generic_name),o.append("medication_class",d.medication_class),o.append("availability",d.availability),this.file&&o.append("medication_image",this.file),u(this,n).createMedication(o).subscribe({next:i=>{i.success&&(u(this,a).success("Medication added successfully"),u(this,_).navigate(["/medications","list"]))},error:()=>u(this,a).error("Failed to add medication, please try again.")})}onFileChange(d){let o=d.target;o.files.length>0&&(this.file=o.files[0])}availabilityValidator(){return d=>["Prescription","OTC"].includes(d.value)?null:{invalidAvailability:!0}}checkMedicationNameExist(d){return u(this,n).verfiy_medication_name_exit({name:this.name.value})}};n=new WeakMap,a=new WeakMap,_=new WeakMap,p.\u0275fac=function(o){return new(o||p)},p.\u0275cmp=y({type:p,selectors:[["app-add-medication"]],standalone:!0,features:[S],decls:20,vars:6,consts:[[1,"page-container"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"input-field"],["matInput","","placeholder","Enter drug name","formControlName","name"],["matInput","","placeholder","Enter generic name","formControlName","generic_name"],["matInput","","placeholder","Availability","formControlName","availability"],["matInput","","placeholder","Medication Class","formControlName","medication_class"],["type","file",3,"change"],["mat-flat-button","","color","accent","type","submit",1,"button",3,"disabled"]],template:function(o,i){o&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Add Medication"),l(),t(4,"form",2),M("ngSubmit",function(){return i.addMedicationHandler()}),t(5,"mat-form-field",3),g(6,"input",4),s(7,Q,2,2),l(),t(8,"mat-form-field",3),g(9,"input",5),s(10,W,1,1),l(),t(11,"mat-form-field",3),g(12,"input",6),s(13,Z,2,2),l(),t(14,"mat-form-field",3),g(15,"input",7),s(16,ee,1,1),l(),t(17,"input",8),M("change",function(J){return i.onFileChange(J)}),l(),t(18,"button",9),r(19,"Add"),l()()()()),o&2&&(c(4),b("formGroup",i.form),c(3),m(i.name.invalid&&(i.name.dirty||i.name.touched)?7:-1),c(3),m(i.generic_name.invalid&&(i.generic_name.dirty||i.generic_name.touched)?10:-1),c(3),m(i.availability.invalid&&(i.availability.dirty||i.availability.touched)?13:-1),c(3),m(i.medication_class.invalid&&(i.medication_class.dirty||i.medication_class.touched)?16:-1),c(2),b("disabled",i.form.invalid))},dependencies:[D,O,N,q,w,P,V,G,I,R,H,j,B],styles:[".page-container[_ngcontent-%COMP%]{height:65vh;overflow-y:auto;background-color:#f0f0f0;display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]{margin:20px auto;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 15px #0000001a;max-width:700px;width:100%;background-color:#f9f9f9;max-height:100vh;overflow-y:auto}h1[_ngcontent-%COMP%]{text-align:center;color:#00796b;font-size:2em;margin-bottom:20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center}.input-field[_ngcontent-%COMP%]{width:100%;max-width:450px}button[_ngcontent-%COMP%]{width:100%;max-width:450px;border-radius:8px;background-color:#005a4f!important;color:#fff}button[_ngcontent-%COMP%]:disabled{background-color:#aaa!important}"]});let e=p;return e})();export{_e as AddMedicationComponent};
