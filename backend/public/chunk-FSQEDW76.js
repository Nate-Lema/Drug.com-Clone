import{b as z}from"./chunk-7MFPINIG.js";import{a as F}from"./chunk-ZA6DTMJJ.js";import{c as L,f as R,g as U}from"./chunk-SP3ND3RW.js";import"./chunk-FZDFYFOH.js";import{Eb as d,Fb as I,Gb as h,Ib as T,Kb as C,La as O,Oa as c,Za as v,aa as x,ca as w,cb as g,d as s,e as b,eb as f,f as M,ib as _,ka as y,la as k,mb as l,nb as n,ob as P,qa as $,rb as S,ub as E,vb as p,yb as D}from"./chunk-YNHFQ7LH.js";var j=t=>["/medications",t,"reviews"],V=t=>["/medications",t,"reviews","add"],A=t=>["/medications","update",t];function N(t,a){if(t&1&&P(0,"img",3),t&2){let e,i=p(2);D("alt",(e=i.medication$())==null?null:e.name),f("src",i.imageUrl$(),O)}}function G(t,a){t&1&&(l(0,"div"),d(1,"No reviews yet."),n())}function q(t,a){if(t&1&&(l(0,"a",5)(1,"p"),d(2,"View reviews for this medication"),n()()),t&2){let e,i=p(2);f("routerLink",C(1,j,(e=i.medication$())==null?null:e._id))}}function H(t,a){if(t&1&&(l(0,"div",6)(1,"button",7),d(2,"Add Review"),n()()),t&2){let e,i=p(2);c(),f("routerLink",C(1,V,(e=i.medication$())==null?null:e._id))}}function J(t,a){if(t&1){let e=S();l(0,"div",6)(1,"button",7),d(2,"Update"),n(),l(3,"button",8),E("click",function(){y(e);let u=p(2);return k(u.deleteMedication(u.medication$()._id))}),d(4,"Delete"),n()()}if(t&2){let e,i=p(2);c(),f("routerLink",C(1,A,(e=i.medication$())==null?null:e._id))}}function K(t,a){if(t&1&&(l(0,"div",2)(1,"h2"),d(2),n(),l(3,"p")(4,"strong"),d(5,"Generic Name:"),n(),d(6),n(),l(7,"p")(8,"strong"),d(9,"Class:"),n(),d(10),n(),l(11,"p")(12,"strong"),d(13,"Availability:"),n(),d(14),n(),g(15,N,1,2,"img",3),n(),l(16,"div",4),g(17,G,2,0,"div")(18,q,3,3,"a",5),n(),g(19,H,3,3,"div",6)(20,J,5,3,"div",6)),t&2){let e,i,u,m,o,r=p();c(2),I((e=r.medication$())==null?null:e.name),c(4),h(" ",(i=r.medication$())==null?null:i.generic_name,""),c(4),h(" ",(u=r.medication$())==null?null:u.medication_class,""),c(4),h(" ",(m=r.medication$())==null?null:m.availability,""),c(),_(r.imageUrl$()?15:-1),c(2),_(r.reviews$().length===0?17:18),c(2),_(r.authService.is_logged_in()?19:-1),c(),_(((o=r.medication$())==null||o.added_by==null?null:o.added_by.user_id)===r.authService.$state()._id?20:-1)}}var it=(()=>{var a,e;let i=class i{constructor(){b(this,a);b(this,e);this.title=x(L),M(this,a,x(F)),this.authService=x(z),M(this,e,x(R)),this.medication$=v(null),this.reviews$=v([]),this.imageUrl$=v(null),this.medication_id=$("")}ngOnInit(){this.medication_id()&&(this.getMedicationById(this.medication_id()),this.getReviews(this.medication_id())),this.title.setTitle("Detail Medication")}getMedicationById(m){s(this,a).getMedicationById(m).subscribe({next:o=>{this.medication$.set(o.data),o.data.image&&o.data.image._id&&s(this,a).getMedicationImageById(o.data.image._id).subscribe({next:r=>{let B=URL.createObjectURL(r);this.imageUrl$.set(B)},error:()=>s(this,e).navigate(["/medications","list"])})},error:()=>s(this,e).navigate(["/medications","list"])})}getReviews(m){s(this,a).getMedicationReviews(m).subscribe({next:o=>this.reviews$.set(o.data),error:()=>s(this,e).navigate(["/medications","list"])})}deleteMedication(m){this.medication$()&&s(this,a).deleteMedicationById(m).subscribe({next:()=>s(this,e).navigate(["/medications","list"]),error:()=>alert("Failed to delete medication")})}};a=new WeakMap,e=new WeakMap,i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=w({type:i,selectors:[["app-detail-medication"]],inputs:{medication_id:[1,"medication_id"]},standalone:!0,features:[T],decls:5,vars:1,consts:[[1,"page-container"],[1,"detail-container"],[1,"medication-info"],[1,"medication-image",3,"src","alt"],[1,"reviews"],[1,"review-link",3,"routerLink"],[1,"actions"],[3,"routerLink"],[3,"click"]],template:function(o,r){o&1&&(l(0,"div",0)(1,"div",1)(2,"h1"),d(3,"Medication Detail"),n(),g(4,K,21,8),n()()),o&2&&(c(4),_(r.medication$()?4:-1))},dependencies:[U],styles:[".page-container[_ngcontent-%COMP%]{height:110vh;overflow-y:auto;background-color:#f0f0f0;display:flex;justify-content:center;align-items:center}.detail-container[_ngcontent-%COMP%]{margin:20px auto;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 15px #0000001a;max-width:700px;width:100%;background-color:#f9f9f9;max-height:95vh;overflow-y:auto}h1[_ngcontent-%COMP%]{text-align:center;color:#00796b;font-size:2em;margin-bottom:20px}.medication-info[_ngcontent-%COMP%]{margin-top:20px;background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px #0000000d}.medication-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px;color:#333;font-size:1.5em}.medication-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#555;font-size:1.1em}.medication-image[_ngcontent-%COMP%]{width:100%;max-width:300px;height:auto;display:block;margin:20px auto;border-radius:8px;box-shadow:0 0 10px #0000001a}.actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between;flex-wrap:wrap}button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#00796b;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px;margin:5px 0;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#005a4f}.reviews[_ngcontent-%COMP%]{margin-top:20px;background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px #0000000d}.reviews[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:10px;font-size:1.5em}.reviews[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#555;font-size:1.1em}.review-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;padding:10px;border-radius:4px;transition:background-color .3s}.review-link[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]});let t=i;return t})();export{it as DetailMedicationComponent};
